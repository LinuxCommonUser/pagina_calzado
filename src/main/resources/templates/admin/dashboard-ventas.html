<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Ventas</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body{ background-color:#f4f6f9; }
        .sidebar{ background:#212529; min-height:100vh; }
        .sidebar a{
            color:white;
            text-decoration:none;
            display:block;
            padding:12px;
        }
        .sidebar a:hover{ background:#0d6efd; }
    </style>
</head>

<body>

<div class="container-fluid">
<div class="row">

    <!-- SIDEBAR -->
<div class="col-md-2 sidebar p-0">
            <h4 class="text-center text-white py-3">ADMIN PANEL</h4>

        <a th:href="@{/}">Regresar al inicio</a>
        <a th:href="@{/admin/dashboard}">Dashboard</a>
        <a th:href="@{/admin/usuarios}">Usuarios</a>
        <a th:href="@{/admin/productos}">Productos</a>
        <a th:href="@{/admin/ventas}">Ventas</a>

            <a href="/admin/pagos">Pagos</a>
        </div>


    <!-- CONTENIDO -->
    <div class="col-md-10 p-4">

        <h2 class="mb-4">Gesti√≥n de Ventas</h2>

        <!-- CARDS -->
        <div class="row mb-4">

            <div class="col-md-4">
                <div class="card shadow">
                    <div class="card-body">
                        <h6>Total Ventas</h6>
                        <h3 th:text="${totalVentas}"></h3>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card shadow">
                    <div class="card-body">
                        <h6>Ingresos Totales</h6>
                        <h3>S/ <span th:text="${totalGeneral}"></span></h3>
                    </div>
                </div>
            </div>

        </div>

        <!-- TABLA -->
        <div class="card shadow">
            <div class="card-header bg-dark text-white">
                Lista de Ventas
            </div>

            <div class="card-body">
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Cliente</th>
                            <th>Fecha</th>
                            <th>Total</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr th:each="v : ${ventas}">
                            <td th:text="${v.idVenta}"></td>
                            <td th:text="${v.usuario != null ? v.usuario.nombreCompleto : 'Sin cliente'}"></td>
                            <td th:text="${v.fecha}"></td>
                            <td>S/ <span th:text="${v.total}"></span></td>

                            <td>
                                <a th:href="@{'/admin/ventas/detalle/' + ${v.idVenta}}"
                                   class="btn btn-primary btn-sm">
                                   Ver Detalle
                                </a>
                            </td>
                        </tr>
                    </tbody>

                </table>
            </div>
        </div>

    </div>
</div>
</div>

</body>
</html>
